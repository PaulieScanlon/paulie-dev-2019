---
title: Understanding Theme UI's Jsx Pragma
tags: ["JavaScript", "React", "Theme UI"]
date: 2021-01-12
author: Paul Scanlon
featuredImageUrl: https://res.cloudinary.com/www-paulie-dev/image/upload/v1610452773/paulie.dev/2021/01/theme-ui-alpha-1_sj4zag.jpg
---

import { MrJsx } from "./MrJsx-alpha-1"

In this post I'm going to try and explain [Theme UI](https://theme-ui.com/)'s Jsx Pragma. I hope to create a series of these posts that might help lower to the barrier to entry when learning Theme UI... let's see how that goes ay!

I'll assume at this point you've already installed Theme UI but if you haven't, have a read of: [Getting Started](https://theme-ui.com/getting-started)

The component we're going to build looks like the below and i've called it `<MrJsx />`. You can find the `src` [here](https://github.com/PaulieScanlon/paulie-dev-2019/tree/master/src/posts/2021/01/MrJsx-alpha-1.js)

<Divider />

<MrJsx />

<Divider />

## [Theme Object](#theme-object)

This is key to Theme UI so bookmark the [theme-spec](https://theme-ui.com/theme-spec) page as i'll be referring it frequently.

The theme object is a little bit like a global CSS file but much easier to integrate with **all** the styles your site will be using.

When your first start your site after installing Theme UI you'll probably notice the background is a kind of purple color. That's fine. It means Theme UI is working and that styles from it's default settings are being applied.

Depending on which install method you've used will determine the name and location of the theme object. I'm going to base this post on the install method for [gatsby-plugin-theme-ui](https://www.gatsbyjs.com/plugins/gatsby-plugin-theme-ui/?=gatsby-plugin-theme-ui)

To change the default background and text colour you'll need to add a `colors` key to the theme object

<Divider />

```javascript
// src/gatsby-plugin-theme-ui/index.js

export default {
  colors: {
    text: "#FFFFFF",
    background: "#131127",
  },
}
```

<Divider />

By default Theme UI will use `text` and `background` to style the body `color` and the body `background-color` and before we go any further I want to explain how and why.

Theme UI's opening gambit if you like is as follows:

> Build themeable design systems based on constraint-based design principles

The bit i'd like to point out is where it says "constraint-based design principles". Theme UI makes some decisions for us so we don't have to, and when working with CSS some constraints are actually really really helpful. _I'll explain later about how the escape hatch works if you don't want or can't in some scenarios work with the constraints_

### [CSS Property maps](#css-property-maps)

This is my opinion is one of the hardest concepts to grasp so let's break this down a bit.

### Object-oriented Programming (OOP):

Theme UI uses OOP to allow HTML access to CSS properties defined in the theme object.

As a practical example go ahead and create a `<MrJsx />` component and ensure you can render it to a page as we'll need to see the output of a `console.log()`

<Divider />

```javascript
// MrJsx.js

import React from "react"
import theme from "../gatsby-plugin-theme-ui"

console.log(theme)

export const MrJsx = () => {
  return <div>MrJsx</div>
}
```

<Divider />

The above will log out the entire theme object. You should see all the default properties and if you've implemented the above change to `colors` you should see that `text` and `background` are the same as the values you've defined.

To go one step further change the `console.log()` so it only logs out the values for the `text` key

<Divider />

```diff
// MrJsx.js
import React from "react"
import theme from "../gatsby-plugin-theme-ui"

- console.log(theme)
+ console.log(theme.colors.text)

export const MrJsx = () => {
  return <div>MrJsx</div>
}
```

<Divider />

And now finally use this `text` value to style the `<div />`

<Divider />

```diff
// MrJsx.js

import React from "react"
import theme from "../gatsby-plugin-theme-ui"

console.log(theme.colors.text)

export const MrJsx = () => {
  return (
    <div
+     style={{
+       color: theme.colors.text,
+      }}
    >
      MrJsx
    </div>
  )
}
```

<Divider />

ðŸš¨ðŸš¨ This is NOT how you use Theme UI ðŸš¨ðŸš¨

... but it does go some way to understanding what the theme object is and how you can access key value pairs contained within it.

## [Jsx Pragma](#jsx-pragma)

In the next step I'll explain how to achieve the same thing but by leverageing Theme UI's super power, The Jsx Pragma.

### [Step One](#step-one)

W.T.Flip is [Jsx Pragma](https://www.gatsbyjs.com/blog/2019-08-02-what-is-jsx-pragma/)?... well, to quote the Gatsby docs

> A pragma is a compiler directive. It tells the compiler how it should handle the contents of a file.

You can take from that what you will but in short the Jsx Pragma allows Jsx to compile things in a special way. In the case of Theme UI we need the compiler to understand and compile something called [The sx Prop](https://theme-ui.com/sx-prop) and it looks like the below.

_Theme UI's Jsx Pragma already includes React so you'll notice in the below i've removed the React import_

<Divider />

```diff
// MrJsx.js

+ /** @jsx jsx */
+ import { jsx } from "theme-ui"
- import React from "react"
- import theme from "../gatsby-plugin-theme-ui"

- console.log(theme.colors.text)

export const MrJsx = () => {
  return (
    <div
+     sx={{}}
-     style={{
-       color: theme.colors.text,
-      }}
    >
      MrJsx
    </div>
  )
}
```

<Divider />

If you're familiar with HTML you'll know that `sx` isn't a valid HTML attribute but by including Theme UI's Jsx Pragma the compiler understands what it is and will know what to do with it before the Jsx is returned to the browser.

### [Step Two](#step-two)

Use the `sx` prop to style a `<div />`

<Divider />

```diff
// MrJsx.js

/** @jsx jsx */
import { jsx } from "theme-ui"

export const MrJsx = () => {
  return (
    <div
     sx={{
+     color: "text"
     }}
    >
      MrJsx
    </div>
  )
}
```

<Divider />

You'll notice here that `text` is a string. The word or string "text" in CSS wouldn't normally mean anything since CSS will be expecting an actual hex reference. e.g: `#FFFFFF` but since the `sx` prop is compiled using the Jsx Pragma Theme UI is able to look up what that value actually is in the theme object.

The reason we don't need to write `theme.colors.text` is because Theme UI shorthands the OOP lookup for us by mapping CSS properties of certain types to a constrained set of keys from with the theme object

In the case of the CSS property `color` Theme UI will map it to `theme.colors` which does indeed contain the key value pair of `text`

For instance if we introduce a new colour to the theme object called `surface` and give it a hex value we can then use it by another CSS property that is also mapped to the `colors` object

<Divider />

```diff
// src/gatsby-plugin-theme-ui/index.js

export default {
  colors: {
    text: "#FFFFFF",
    background: "#131127",
+   surface: "#232140"
  },
}
```

<Divider />

```diff
// MrJsx.js

/** @jsx jsx */
import { jsx } from "theme-ui"

export const MrJsx = () => {
  return (
    <div
      sx={{
        color: "text",
+       backgroundColor: "surface",
      }}
    >
      MrJsx
    </div>
  )
}
```

<Divider />

The relationship between the CSS properties and where in the theme objet Theme UI will shorthand the lookup is detailed in the [Theme Scales](https://theme-ui.com/theme-spec#theme-scales)

The first part of the Theme Scales table explains the following:

| Theme Key | CSS Properties                        |
| --------- | ------------------------------------- |
| colors    | color, background-color, border-color |

This means that whenever you're applying a CSS property of `color`, `background-color` or `border-color` Theme UI will atomically look to the `colors` object and return the resulting value.

This is just an introduction to Theme UI and in later posts i'll be explaining in more depth the relationship between CSS properties and the theme object, so stay tuned and give me a follow on Twitter ðŸ•º
